---
title: HTML and PDF Posters Using RMarkdown
author:
  - name: Sophie Wagner
    affil: 1
  - name: Felix Degenhardt
    affil: 2
affiliation:
  - num: 1
    address: "Student Number: 0000000"
  - num: 2
    address: "Student Number: 0000000"
column_numbers: 3
# logoright_name: uplogo.jpg
primary_colour: "#00305E"
secondary_colour: "white"
accent_colour: "#00305E"
titlebox_bordercol: "#00305E"
body_textsize: "38pt"

output: 
  posterdown::posterdown_html:
    self_contained: false
  html_document:
    
    
knit: pagedown::chrome_print
# bibliography: packages.bib
---




```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{r, include = F, warning= F}
library(tidyr)
library(ggplot2)
library(tidyverse)

### show chunk option
## show yaml options link

data <- read.csv("../../00_data/survey/survey_processed.csv") # Read in student survey

# Drop all rows with missing observations in geschlecht, einkommen, 
# fleisch or wegdauer
data <- data %>% 
  drop_na(einkommen, fleisch, wegdauer) %>%
  mutate(organ_donor = as.factor(organ_donor),
         female = as.factor(female))
```

# Abstract / Introduction
**First of all: If you create a poster, use less text than we do here, you will explain what's on the poster while presenting it, so make sure you spend your space on the most important tables/graphs instead of text!**
A poster is generally structured like an article or a presentation: Introduction (statement of the research question, motivation and relevance, context and background of the study), institutional background (if needed), data description, including basic descriptives, methodology, results and key takeaways. 

The abstract of this poster provides a brief overview of how to create posters in R, and why this is relevant. We suggest using the `posterdown` package, generated by Brent Thorne and made publicly accessible via [github](https://github.com/brentthorne/posterdown). As mentioned in the beginning of the course, such packages are the main benefit of using open source software, and we highly encourage you to participate in this community. All information are available on github (including a poster template), we will just provide a brief overview of functionalities here. 


# Background / Data

You typically include a section about your background (if you use the GSOEP data, this may include information about the data, the German labor market (if relevant), information about the data (survey or administrative data, main information used, is it representative?)). In this course, such background is not as relevant, but a small background section may still be interesting. Also, this section serves as a transition to your descriptive statistics, so make use of this by maybe showing some interesting tables/figures already. Go to the RmD document (if you're not there) to see what's happening in the background of this table. 


```{r}
# see how this chunk is not shown in the poster, because this is the default option.
data_summary <- data %>% group_by(organ_donor) %>% summarise_at(c("mathenote", "einkommen", "risiko","wegdauer"), ~mean(.x, na.rm = T))

# Modify and format the data
data_summary_formatted <- data_summary %>%
  mutate(across(where(is.numeric), ~ round(., 2))) %>% # Round numeric columns
  rename(
    `Organ Donor` = organ_donor,
    `Math Grade` = mathenote,
    `Income` = einkommen,
    `Risk` = risiko,
    `Travel Time` = wegdauer
  )
```


```{r mytable, out.width='80%'}
# In `posterdown` this is as easy as using the `kable` table formatting you are probably use to as per typical R Markdown formatting. This is just an example, if you want to do it differently, go! 

knitr::kable(data_summary_formatted, caption = 'Table caption.',align = 'c',"html")
```

# Methods (if needed)

As you see in the Rmd Document, you can create headers in the same way as in other markdown files, by using the hashtag. The color of the headers, the font size, and a lot of other settings like the number of columns can be adjusted in the header of the Rmd file. We implicitly used it before to create date and title of the session.

```{r, echo=FALSE, out.width = '60%', fig.align="center"}
knitr::include_graphics("header_example.png", error = FALSE)
```
 
 For posters these settings are even more important. Though not printed in the PDF/HTML file, the header determines the design of the poster. You can adjust various settings in the YAML-style (stands for "yet another markup language"). You can see our example setup in the image below (see how you can also include images if wanted?). All possible styles for the `posterdown` package can be found [here](https://github.com/brentthorne/posterdown/wiki/posterdown_html). Importantly, you need to install the package `pagedown` and assess its function `chromeprint` to save your poster as a PDF.

# Results

```{r standard-plot, out.width='85%', echo = F, fig.align='center', fig.cap='Commuting distance and monthly income by gender - Linear fit', fig.height=5, warning=FALSE, message = F}
g <- data %>% 
      ggplot(aes(x = einkommen, y = wegdauer))+
      geom_point(aes(color = organ_donor))+
      geom_smooth(method = "lm")+
      facet_grid(sidejob~female) +       
      theme_minimal()
g

```

You can reference tables like so: Table \@ref(tab:mytable), or with figures: Figure \@ref(fig:standard-plot), or Figure \@ref(fig:morefigs). This part includes a brief description of results. Use **bold font** for most important aspects, keep it brief and let the graphs/tables speak for themselves!

```{r morefigs, out.width='85%', echo=F, fig.align = 'center', fig.cap='Commuting distance and monthly income by gender - Polynomial fit', fig.height=5, warning = FALSE, message = F}

p <- data %>% 
      ggplot(aes(x = einkommen, y = wegdauer))+
      geom_point(aes(color = organ_donor))+
      geom_smooth()+
      facet_grid(sidejob~female)+
      labs(x = "Monthly income",
          y = "Commuting distance (min.)",
          title = "",
          subtitle = " ",
          caption = "Source: Student survey 2023 and 2024",
          color = "Organ donor")+
      #theme_bw()
      #theme_gray()
      theme_minimal()
      #theme_light()
p

```

Writing code works similar to any other markdown document. However, the default value of `echo` is FALSE, meaning that the output is shown, but not the code. Warning messages are included by default, so if you get those, you might want to suppress them (by using the `warning = FALSE` command in the code chunk). [Here](https://rmarkdown.rstudio.com/lesson-3.html) is an overview of chunk settings. You can also find examples of chunk settings for including graphs that might me useful for your poster. [Here](https://yihui.org/knitr/options/) is another overview of chunk options that are useful for tables and figures.

One last note: You can also use a bibliography to include references in `posterdown`, but we won't need this here.

# Conclusion

The only thing left to say is what Brent Thorne says in the template: "Try `posterdown` out! Hopefully you like it!"

Btw, you probably won't have so much empty space left


